## 结论

算法部署：
可穿戴设备：出局提取、保存、前级滤波处理与特征提取
手机或者其他移动设备：接受，调用分析API
服务器：搭载网络进行分析，回传数据

## 其他报道
https://zhuanlan.zhihu.com/p/547409950
特点：AFib诊断准确

https://stanfordmlgroup.github.io/projects/ecg2/
吴恩达：CNN进行ECG诊断，但数据集难
## 10098559、10299691、10667712、10813565等

### 硬件构成
AFE，两个电极、低功耗蓝牙orWiFI等传输
可选择：IMU、PPG测量、生物阻抗测量等辅助信息
### 数据传递
![[Pasted image 20240110201146.png]]
![[Pasted image 20240111101023.png]]
![[Pasted image 20240110201628.png]]
![[Pasted image 20240110202518.png]]
![[Pasted image 20240110202652.png]]
本地预处理，时间序列分析，传递信息：RR间隔、加速度信息，时间戳
服务器：诊断
回传：根据标准滤波之后的信号，需要存储在可穿戴设备中

### 处理算法
#### 数据来源
原文翻译：
将电子装置连接到哺乳动物上，其中所述装置包括:至少两个被配置为检测来自所述哺乳动物的生理信号的电极，至少一个被配置为检测次级信号的测量仪器，以及连接到所述电极的至少两条电极走线和刚性外壳;并将生理信号与次要信号进行比较，以识别人工制品

**还需要测量一个参考信号？**
识别还包括了生理信号与这个第二信号的对比，第二类信号用于推导活动和位置，有些实例中第二类信号是从IMU中得出的。还有些包括了电极的连接情况等等，还有些用于睡眠监测。
![[Pasted image 20240110212219.png]]

可以用的信号特征包括：
+ r峰位置、r峰过低标志、饱和标志、呼吸频率、P/T波位置、r峰幅度（or代理）或者是ECG幅度代理
+ PPG
+ 生物阻抗
+ 呼吸率（EDR）的提取：可以从ECG的信号调制中得到。可能与心率失常的其他临床指标有关

具体的提取方式：
测量r峰位置的ECG信号幅度来提取r峰幅度。可以用于区分真峰与假峰检测，与拍形形态的变化
![[Pasted image 20240110231606.png]]

![[Pasted image 20240110231630.png]]
这一个点在一篇论文中有所体现，他配置了不同频率的滤波器来分别提取频谱信息，这些信息表征了信号形态，进行分析。
![[Pasted image 20240110231853.png]]
PPG 可以作为验证信息作用。
一些生物阻抗信息（皮肤电响应、阻抗等）也可以作为备用信息源辅助分析
还有一些实例中提取的信息：![[Pasted image 20240110231158.png]]
![[Pasted image 20240110232213.png]]
#### 数据传输与处理

一些设备实例：
可穿戴设备： 向中间设备传输R-R间隔时间序列和时间戳
中间设备：再向服务器传递所述的R-R时间间隔序列和时间戳
服务器：从传递过来的信息推断出最可能的心率以及其起始/偏移时间，且根据第一标准将最可能的心率过滤成数据集，并且将这个数据通过中间设备传递回可穿戴设备

可穿戴设备向手机or服务器传输的数据包括：
1. QRS检测，产生一个实时的ECG序列中的R峰位置
2. R-R时间间隔，和时间戳一起传递（b和c描述了两种传递方式）
3. 从r-r区间时间序列数据中推断最可能的节律及其开始/偏移时间的服务器端算法
4. 根据特定的过滤标准过滤推断心律的波形，使得在过滤后仅保留与给定标准匹配的推断心律
5. 滤波之后每一段心率数据的起始/偏移时间戳，从服务器-手机-穿戴设备
6. 对应了每一个起始/偏移时间标签的ECG数据，在服务器与手机之间双向传递

在某些实例中，心率推断系统接受额外的数据源：
1. IMU测量的用户活动时间序列
2. 每一个R-R记录的具体日期和时间
3. 用户年龄、性别、测量的临床特征、既往医疗状况、用药信息和病史etc
4. ECG信号的特征和汇总统计：如给定时间段内ECG信号样本的平均值、中位数、标准差、总和等等
5. 设备提供的可信度评级，以表明心跳估计的质量

#### 处理算法

+ 提取算法
	+ PanTompkins：一系列数字滤波+实时QRS
	+ 模拟R峰检测电路：带通滤波器+比较器电路+动态增益调整组成的r峰检测
	+ 滤波器组 or STFT or 小波：提取不同频谱的特征：潜在戒律的类型，ECG特征的存在，r峰检测的置信水平以及各种噪声的存在。

+ 识别运动伪差：
	当生理信号与运动信号的频谱匹配时，识别出运动伪差。
	电极到AFE的走线也会对信号造成一定影响。

+ 在服务器端进行滤波的标准：
	节律过滤标准可由医生或其他医疗专业人员在患者使用可穿戴传感器之前指定。在其他实施例中，节奏过滤标准是动态的，并且可以在系统使用期间根据预定义的规则进行更新。

+ 在服务器端推断：
	可以调整每个推断节奏的开始时间和偏移时间，使得每个节奏的所得持续时间小于给定的最大允许持续时间。计算出的置信度度量可以作为节奏过滤标准的输入。在一些实施例中，系统包含从r-r间隔时间序列数据推断心律信息

+ 服务器诊断系统中所使用的置信度方法：
	1. 在用户RR间隔时间序列中，计算每种心率类型的频率和间隔时间
	2. 根据在给定用户的R-R间隔时间序列集合中推断出的节奏频率和持续时间，估计每个节奏类型的置信度统计
	3. 每一段ECG数据是够超过了预设阈值
	4. 将超过阈值的对应ECG数据返回给调用API的软件

### 11382555
从FIG18开始与上面有所不同：

![[Pasted image 20240111103731.png]]

![[Pasted image 20240111103758.png]]




![[Pasted image 20240111103925.png]]
![[Pasted image 20240111103957.png]]![[Pasted image 20240111104017.png]]
**测量目的**
在一些实施例中，心律失常包括至少一种:室性心动过速、室上性心动过速、异位、心室颤动或延长的暂停。

在一些实施例中，推断心律失常发生的可能性包括通过第二子集处理第一子集的输出，其中第一子集处理至少24小时连续检测、存储的心律信号
### 处理算法

使用神经网络从R峰序列中预测负担（心脏疾病）
从网络的第一层处理ECG，并将输出传递到计算设备（手机或者服务器）
通过相同网络的第二层进一步处理，得到用户特征



特征提取模型：
输入RR间隔
时间分布特征提取模型？
循环神经网络层（带LSTM核，长短期记忆）返回序列
返回单个结果
全连接层（ReLU作为激活函数）
sigmoid作为激活函数
房颤负荷预测？

![[Pasted image 20240111103743.png]]
上面模型的特征提取实例：
输入：RR间隔特征序列
网络结构：
	卷积核size=3，激活函数ReLU
	 池化
	 卷积核size=3，激活函数ReLU
	 池化
	 压平（一维）
	 丢弃
	 dense
	 丢弃
	 输出

![[Pasted image 20240111103810.png]]

使用NN编码预测心率的系统实例：
**ECG编码**
![[Pasted image 20240111103825.png]]

单个神经网络内层的第一子层与第二子层：
![[Pasted image 20240111103836.png]]



系统示意图：
![[Pasted image 20240111103854.png]]


神经网络编码预测心率注释



